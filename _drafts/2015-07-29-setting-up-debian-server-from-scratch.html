---
layout: post
title: Setting up Debian server from scratch for Django (Nginx, Postresql, Gunicorn,
  Django and Supervisor) - Part I
date: '2015-07-29T05:47:00.001-07:00'
author: Prabakaran Santhanam
tags: 
modified_time: '2015-07-29T05:47:46.905-07:00'
blogger_id: tag:blogger.com,1999:blog-9128617390470614639.post-2719511036329321054
blogger_orig_url: http://codificious.blogspot.com/2015/07/setting-up-debian-server-from-scratch.html
---

###### START OF BASIC OS CONFIGURATION ######<br />During this session, don't you dare to close the ssh session before verifying that you could login with your credentials again from another terminal session without any issues.<br /><br /><br />$ ssh root@server-ip<br /><br />$ apt-get update<br /><br />1. To set up date time from network time protocol,<br /><br />$ apt-get install ntp ntpdate<br /><br />2. install nano<br /><br />$ apt-get install nano <br /><br />3. install essentials<br /><br />$ apt-get -y install curl git-core python-software-properties software-properties-common<br /><br />if an error like the below occurs <br /><br />########## error ############<br />Generation complete.<br />perl: warning: Setting locale failed.<br />perl: warning: Please check that your locale settings:<br />&nbsp;&nbsp; &nbsp;LANGUAGE = (unset),<br />&nbsp;&nbsp; &nbsp;LC_ALL = (unset),<br />&nbsp;&nbsp; &nbsp;LC_CTYPE = "en_US.UTF-8",<br />########## error #############<br />do the below step,<br /><br />4. Generating locales<br />check locales by typing in,<br />$ locale <br />in shell and then configure it with <br />$ dpkg-reconfigure locales<br />In dpkg-reconfigure locales, first choose all the options available for the language <br />that is about to be choosen. Then in the next choose the UTF-8 in that appropriate lang.<br /><br />If this step still can't configure locales then add the below lines into .zshrc or .bashrc file <br /><br />export LANGUAGE=en_US.UTF-8<br />export LANG=en_US.UTF-8<br />export LC_ALL=en_US.UTF-8<br /><br />then save the file and source it (do the same for .zhsrc if zsh is installed later)<br />$ source ~/.bashrc<br /><br />then run the file /usr/sbin/locale-gen (check if the file '/etc/locale.gen' exists if not create it)<br /><br />$ /usr/sbin/locale-gen<br /><br />then dpkg configure<br /><br />$ dpkg-reconfigure locales<br /><br />then test it by running `apt-get install hello` and see it installs it without locale error<br /><br />Skip steps 5 to 7, if you don't want to move on to Zsh<br /><br />5. install zsh<br /><br />$ apt-get install zsh <br /><br />6. To change to zsh<br /><br />$ chsh -s /bin/zsh <br /><br />7. might trigger an issue [http://ubuntuforums.org/showthread.php?t=1702833] which will prevent user to login to server via ssh<br /><br />to prevent this add zsh to /etc/shells file<br /><br />8. install sudo <br /><br />$ apt-get install sudo<br /><br />if found any problems with sudo then edit the /etc/sudoers file which contains the configurations for sudo.<br />If you want to add a sudo privilege to a user then add the following lines into sudoers file,<br /><br />&nbsp;&nbsp;&nbsp; user ALL=(ALL) ALL<br /><br />9. add a user<br /><br />$ adduser ethics<br /><br />then do add that user to sudo <br /><br />$ visudo<br /><br />in the file opened under the lines<br /><br /># User privilege specification<br />root&nbsp;&nbsp;&nbsp; ALL=(ALL:ALL) ALL<br /><br />add the line <br /><br />user&nbsp;&nbsp;&nbsp; ALL=(ALL:ALL) ALL<br /><br />then check if that user works fine by logging in via ssh and try sudo commands<br /><br />10. Install supervisor<br /><br />$ apt-get install supervisor<br /><br />$ service supervisor restart<br /><br />To check the supervisor, create a simple shell script in home directory<br /><br />$ nano ~/neo<br />#!/bin/bash<br />cat "pop" &gt; new.txt<br /><br />then, create a supervisor configuration file for this new shell script (supervisor controls any process using conf files),<br /><br />$ vim /etc/supervisor/conf.d/neo.conf<br /><br />[program:neo]<br />command=/home/ethics/sup/neo.py<br />autostart=true<br />autorestart=true<br />stderr_logfile=/var/log/neo.err.log<br />stdout_logfile=/var/log/neo.out.log<br /><br />save the file and reload the supervisor.<br /><br />$ service supervisor restart<br /><br />In the new conf file, command will be autostarted and will be restarted once stopped.Now reload the supervisor conf files.<br /><br />$ supervisorctl reread<br /><br />And supervisor even have an interactive prompt for us to control the processes. To do that just use the below command,<br /><br />$ supervisorctl<br /><br />Inside supervisorctl type 'help' to know the available commands and options.<br /><br />###### END OF BASIC OS CONFIGURATION ######